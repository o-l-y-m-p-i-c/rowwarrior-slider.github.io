<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./assets/css/index.css">

    <script>

        class VerticalSlider {
            screenPosY =null
            containerStartPosY= null
            containerEndPosY = null
            switchFlag =false

            container = null
            selectorAll = null
            selectorAllOptions= null
            shownBlock=null

            constructor(containerClass){
                this.setScreenPosY(window.pageYOffset)
                const container = document.querySelector(`${containerClass}`)
                const containerList = container.querySelectorAll(`.vertical-slider__item`)
                this.setSelector(containerList)
                this.setContainer(container)
                this.checkContainers() 
            }
            resize = () =>{
                this.setScreenPosY(window.pageYOffset)
                this.scrollingEvent()
            }
            scroll = () =>{
                this.setScreenPosY(window.pageYOffset)
                this.checkContainers()
            }
            setSelector = (arr) => {
                this.selectorAll = arr
            }
            setContainer  = (item) => {
                this.container = item
                this.setStartAndEnd(item)
            }
            setStartAndEnd = (item) =>{
                // console.log(item.getBoundingClientRect())
            }
            setScreenPosY = (pos) => {
                this.screenPosY = pos
            }
            handleClick = (event) => {
                const id = event.target.getAttribute('item-id')
                this.changeShownContainer(null,id)
            }
            changeShownContainer =  (item,id = null) => {
                // set shown container
                this.shownBlock = item
                // if (id == null) {
                //     this.shownBlock = item
                // }else{
                //     this.selectorAll.forEach(selector => {
                //         const selectorId = selector.getAttribute('item-id')
                //         if (selectorId  == Number(id)) {
                //             this.shownBlock = selector
                //             return
                //         }
                //     })
                // }
                // turn off unshown containers

                this.selectorAll.forEach((selector,index) =>
                        {
                            if(selector !== this.shownBlock ){
                                selector.classList.remove('show')
                                const parent = selector.closest('.js-container')
                                const itemID = selector.getAttribute('item-id')
                                const contentContainer = parent.querySelectorAll(`.js-content-item[item-id="${itemID}"]`)
                                const link = parent.querySelector(`.js-pagination-btn[item-id="${itemID}"]`)
                                link.classList.remove('active')
                                contentContainer.forEach(union => union.classList.remove('show'))
                                
                            }else if(selector == this.shownBlock ) {
                                
                                // if (!selector.classList.contains('show')) {
                                    // console.log(selector.classList.contains('show'))
                                    selector.classList.add('show')
                                    console.log(selector == this.shownBlock)
                                    const parent = selector.closest('.js-container')
                                    const itemID = selector.getAttribute('item-id')
                                    const contentContainer = parent.querySelectorAll(`.js-content-item[item-id="${itemID}"]`)
                                    const link = parent.querySelector(`.js-pagination-btn[item-id="${itemID}"]`)
                                    const span = parent.querySelector('.js-pag-sapn')
                                    const linkProps = {
                                        width: link.offsetWidth,
                                        top: link.offsetTop,
                                        left : link.offsetLeft,
                                        height: link.offsetHeight
                                    }
                                    link.classList.add('active')
                                    span.style.height = linkProps.height + 'px'
                                    span.style.width = linkProps.width + 'px'
                                    span.style.left = linkProps.left + 'px'
                                    span.style.top = linkProps.top + 'px'

                                    contentContainer.forEach(union => union.classList.add('show'))
                                    if (this.switchFlag) {
                                        screen.screenTop = 200
                                        window.moveTo(0,0)
                                        moveTo(20,20)
                                        window.focus()
                                    }
                                // }
                                
                            }
                        }
                    )
                
                
            }
            checkContainers = () =>{
              
                // if (!this.switchFlag) {
                    if (this.container.getBoundingClientRect().top > 100) {

                        if (this.switchFlag === false) {
                            this.selectorAll.forEach((item,index,arr) => {
                                const percent = (item.getBoundingClientRect().top + item.getBoundingClientRect().height) /100
                                const allHeight = item.getBoundingClientRect().height

                                const parent = item.closest('.js-container')
                                const id = item.getAttribute('item-id')
                                const img = parent.querySelector(`.js-img[item-id="${id}"]`)
                                img.style.transform = `translate(0px,${item.getBoundingClientRect().height/200 - 50}%)`
                            })

                            if (this.selectorAll[0]) {
                                this.changeShownContainer(this.selectorAll[0])
                            }
                            this.switchFlag = true
                            return
                            console.log('srabotal 1')
                        }
                    }
                    else if (this.container.getBoundingClientRect().top +this.container.getBoundingClientRect().height > -100){

                        if (this.switchFlag === false) {
                            this.selectorAll.forEach((item,index,arr) => {
                                // console.log(item)
                                const percent = (item.getBoundingClientRect().top + item.getBoundingClientRect().height) /100
                                const allHeight = item.getBoundingClientRect().height

                                const parent = item.closest('.js-container')
                                const id = item.getAttribute('item-id')
                                const img = parent.querySelector(`.js-img[item-id="${id}"]`)
                                img.style.transform = `translate(0px,${-item.getBoundingClientRect().height/200 - 50}%)`
                            })
                            if (this.selectorAll[this.selectorAll.length - 1]) {
                                this.changeShownContainer(this.selectorAll[this.selectorAll.length - 1])
                            }

                            this.switchFlag = true
                            console.log('srabotal 2')
                            // return
                        }
                        
                    
                    }
                // }
                
                this.selectorAll.forEach((item,index,arr) =>{
                    
                    if (item.getBoundingClientRect().top <= 0 && (item.getBoundingClientRect().top + item.getBoundingClientRect().height ) >=  100    ) {
                        const percent = (item.getBoundingClientRect().top + item.getBoundingClientRect().height) /100
                        const allHeight = item.getBoundingClientRect().height
                        const parent = item.closest('.js-container')
                        const id = item.getAttribute('item-id')
                        const img = parent.querySelector(`.js-img[item-id="${id}"]`)

                        img.style.transform = `translate(0px,${-item.getBoundingClientRect().height/200 + percent - 50}%)`
                        img.style.transition = 'transform 0.4s ease-out, opacity 0.4s ease-out'
                        // if (!this.switchFlag) {
                            // this.changeShownContainer(item)
                            // console.log('srabotal aaa')
                            // this.switchFlag = true
                        // }else if(item.classList.contains('show')){
                            this.changeShownContainer(item)

                        // }
                        
                        // this.changeShownContainer(item)
                        console.log('srabotal')
                    }
                    
                })
            
               

            }
            scrollingEvent = () => {
                // if (this.switchFlag) {
                    this.checkContainers()
                // }
            }
        }


        let slider1, slider2

        window.onload = () => {
            if (window.innerWidth > 1024) {
                slider1 = new VerticalSlider('.slider1')
                slider2 = new VerticalSlider('.slip')

            }
            window.onscroll = (e) => {
            if (window.innerWidth > 1024) {
                slider1.scroll()
                slider2.scroll()
            }
            
            
            }
            window.onresize = () => {
                if (window.innerWidth > 1024) {
                    slider1.resize()
                    slider2.resize()
                }
            }
        }

       
          
    </script>
</head>
<body>
    <main>
        <div class="" style="height:20vh"></div>
        <section>
            <div class="vertical-slider__container js-container slider1">
                <div class="vertical-slider__content-wrapper">
                    <div class="vertical-slider__item  skeleton " id="Versatility" item-id="1">
                    </div>
                    <div class="vertical-slider__item  skeleton" id="SimpleAssembly" item-id="2">
                    </div>
                    <div class="vertical-slider__item  skeleton" id="CompactDesign" item-id="3">
                    </div>
                    <div class="vertical-slider__item  skeleton" id="EaseOfUse" item-id="4">
                    </div>

                    <div class="vertical-slider-absolute__container">
                        <div class="vertical-slider-sticky__list-container ">
                            <div class="vertical-slider-sticky__background-list slider1-backgrounds">
                                <img class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/img/good-img-1.png" 
                                    item-id="1" alt=""
                                >
                                <video class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/video/video-good-1.mp4"  autoplay loop
                                    item-id="2" alt="">
                                </video>
                                <img 
                                    class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/img/good-img-3.png" 
                                    item-id="3" alt=""
                                >
                                <img 
                                    class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/img/good-img-4.png" 
                                    item-id="4" alt=""
                                >
                            </div>
                            <div class="vertical-slider__inner slider1-inner">
                                <div class="vertical-slider__inner-content-wrapper slider1-content-wrapper">
                                    <div class="vertical-slider__pagination">
                                        <ul class="vertical-slider__pagination-list">
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="1">
                                                <a href="#Versatility">
                                                    Versatility
                                                </a>
                                                
                                            </li>
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="2">
                                                <a href="#SimpleAssembly">
                                                    Simple assembly
                                                </a>
                                                
                                            </li>
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="3">
                                                
                                                <a href="#CompactDesign">
                                                    Compact design
                                                </a>
                                            </li>
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="4">
                                                
                                                <a href="#EaseOfUse">
                                                    Ease of use
                                                </a>
                                            </li>
                                            <span class="vertical-slider__pagination-sapn js-pag-sapn"></span>
                                        </ul>
                                        
                                    </div>
                                    <div class="vertical-slider__content-list">
                                        <div class=" vertical-slider__content-item js-content-item" item-id="1">
                                            <h3 class="vertical-slider__content-item-subtitle trans-delay-02s" data-delay="1s">
                                                Versatility
                                            </h3>
                                            <h4 class="vertical-slider__content-item-title trans-delay-04s" data-delay="2s">
                                                Get a solid, low-impact, full-body workout at home
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph trans-delay-08s" data-delay="3s">
                                                Like a Swiss army knife, Row Warrior is a tool that provides a wide array of benefits. Use it to build muscle, gain strength, improve cardio, increase stamina, or simply improve your overall well-being without ever walking out your door.
                                            </p>
                                        </div>
                                        <div class="vertical-slider__content-item js-content-item" item-id="2">
                                            <h3 class="vertical-slider__content-item-subtitle">
                                                Simple assembly
                                            </h3>
                                            <h4 class="vertical-slider__content-item-title">
                                                Unbox, unwrap,<br />
                                                assemble, and row                                            
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph">
                                                When Row Warrior arrives at your door, you’ll be ready to row in 30 minutes or less. Our no-fuss design requires little assembly and comes with simple, easy-to-follow instructions so you can hop on and get rowing with ease.
                                            </p>
                                        </div>
                                        <div class=" vertical-slider__content-item js-content-item" item-id="3">
                                            <h3 class="vertical-slider__content-item-subtitle">
                                                Compact design
                                            </h3>
                                            <h4 class="vertical-slider__content-item-title">
                                                No space?<br />
                                                No problem                                            
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph">
                                                Featuring a sleek, simple, compact design, Row Warrior can easily be folded, separated, and stored away. Whether you’re a workout warrior in a small living space, or you want a little extra room in your home gym, this rower is for you.
                                            </p>
                                        </div>  
                                        <div class=" vertical-slider__content-item js-content-item" item-id="4">
                                            <h3 class="vertical-slider__content-item-subtitle">
                                                Ease of use
                                            </h3>
                                            <h4 class="vertical-slider__content-item-title">
                                                Perfect for beginners & experienced warriors alike                                            
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph">
                                                Whether you’ve been rowing for decades or are just starting out, Row Warrior offers easily customizable resistance levels so you can find the right challenge for you - wherever you are on your fitness journey.                                            </p>
                                        </div>  
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </section>
        <div class="" style="height:20vh"></div>
        <section>
            <div class="vertical-slider__container js-container slip">
                <div class="vertical-slider__content-wrapper">
                    <div class="vertical-slider__item  skeleton " id="Simple" item-id="1">
                    </div>
                    <div class="vertical-slider__item  skeleton" id="Smart" item-id="2">
                    </div>
                    <div class="vertical-slider__item  skeleton" id="Solid" item-id="3">
                    </div>


                    <div class="vertical-slider-absolute__container">
                        <div class="vertical-slider-sticky__list-container ">
                            <div class="vertical-slider-sticky__background-list">
                                <img class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/img/5.jpg" 
                                    item-id="1" alt=""
                                >
                                <img 
                                    class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/img/6.jpg" 
                                    item-id="2" alt=""
                                >
                                <img 
                                    class="vertical-slider__item-img js-content-item js-img" 
                                    src="./assets/img/7.jpg" 
                                    item-id="3" alt=""
                                >
                            </div>
                            <div class="vertical-slider__inner slider2-inner">
                                <div class="vertical-slider__inner-content-wrapper slider2-content-wrapper">
                                    <div class="vertical-slider__pagination">
                                        <ul class="vertical-slider__pagination-list">
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="1">
                                                <a href="#Simple">
                                                    Simple
                                                </a>
                                                
                                            </li>
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="2">
                                                <a href="#Smart">
                                                    Smart
                                                </a>
                                                
                                            </li>
                                            <li class="vertical-slider__pagination-item js-pagination-btn" item-id="3">
                                                
                                                <a href="#Solid">
                                                    Solid
                                                </a>
                                            </li>

                                            <span class="vertical-slider__pagination-sapn js-pag-sapn">

                                            </span>
                                        </ul>
                                        
                                    </div>
                                    <div class="vertical-slider__content-list">
                                        <div class=" vertical-slider__content-item js-content-item" item-id="1">

                                            <h4 class="vertical-slider__content-item-title">
                                                GET A SOLID WORKOUT WITHOUT THE FUSS
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph">
                                                The ultimate full body workout, Row Warrior delivers tangible results in minimal time, without complicated routines or loads of equipment. A simple 15 to 20 minute rowing session done 2 to 3 times a week will help you build strength, boost cardio, increase endurance, and torch fat.
                                            </p>
                                        </div>
                                        <div class="vertical-slider__content-item js-content-item" item-id="2">

                                            <h4 class="vertical-slider__content-item-title">
                                                TRACK YOUR STATS & WATCH YOUR GAINS                                            
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph">
                                                When it comes to staying motivated, there’s nothing more powerful than seeing your progress. With its built-in Bluetooth LED monitor, Row Warrior will help you track time, distance, row count, calories burned, heart rate, and more.
                                            </p>
                                        </div>
                                        <div class=" vertical-slider__content-item js-content-item" item-id="3">

                                            <h4 class="vertical-slider__content-item-title">
                                                BATTLE-TESTED & BUILT TO LAST                                            
                                            </h4>
                                            <p class="vertical-slider__content-item-paragraph">
                                                Made with an industrial-grade steel frame that can handle weights of up to 550 pounds, Row Warrior sturdy design features wear-resistant surfaces that can withstand heavy use so it will look sleek and clean for years to come.
                                            </p>
                                        </div>  

                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </section>
        <div class="" style="height:20vh"></div>
    </main>
    <script src="./assets/script/index.js" ></script>
</body>
</html>